{"remainingRequest":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\babel-loader\\lib\\index.js!F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\src\\views\\shop\\Content.vue?vue&type=template&id=5fe3c94c&scoped=true","dependencies":[{"path":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\src\\views\\shop\\Content.vue","mtime":1607158761000},{"path":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCB7IHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTVmZTNjOTRjIik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi01ZmUzYzk0YyIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJjb250ZW50Igp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogImNhdGVnb3J5Igp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogInByb2R1Y3QiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9fZGV0YWlsIgp9Owp2YXIgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX3RpdGxlIgp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX3NhbGVzIgp9Owp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX3ByaWNlIgp9OwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJzcGFuIiwgewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9feWVuIgp9LCAiwqUiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfOSA9IHsKICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX29yaWdpbiIKfTsKdmFyIF9ob2lzdGVkXzEwID0gewogIGNsYXNzOiAicHJvZHVjdF9fbnVtYmVyIgp9OwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCB2YXIgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoZnVuY3Rpb24gKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkc2V0dXAuY2F0ZWdvcmllcywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgewogICAgICBjbGFzczogewogICAgICAgICdjYXRlZ29yeV9faXRlbSc6IHRydWUsCiAgICAgICAgJ2NhdGVnb3J5X19pdGVtLS1hY3RpdmUnOiAkc2V0dXAuY3VycmVudFRhYiA9PT0gaXRlbS50YWIKICAgICAgfSwKICAgICAga2V5OiBpdGVtLm5hbWUsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgcmV0dXJuICRzZXR1cC5oYW5kbGVUYWJDbGljayhpdGVtLnRhYik7CiAgICAgIH0KICAgIH0sIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5uYW1lKSwgMTEKICAgIC8qIFRFWFQsIENMQVNTLCBQUk9QUyAqLwogICAgLCBbIm9uQ2xpY2siXSk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSldKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5saXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICAgIGNsYXNzOiAicHJvZHVjdF9faXRlbSIsCiAgICAgIGtleTogaXRlbS5faWQKICAgIH0sIFtfY3JlYXRlVk5vZGUoImltZyIsIHsKICAgICAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX19pbWciLAogICAgICBzcmM6IGl0ZW0uaW1nVXJsCiAgICB9LCBudWxsLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbInNyYyJdKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX2NyZWF0ZVZOb2RlKCJoNCIsIF9ob2lzdGVkXzUsIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5uYW1lKSwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZVZOb2RlKCJwIiwgX2hvaXN0ZWRfNiwgIuaciOWUriAiICsgX3RvRGlzcGxheVN0cmluZyhpdGVtLnNhbGVzKSArICIg5Lu2IiwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZVZOb2RlKCJwIiwgX2hvaXN0ZWRfNywgW19ob2lzdGVkXzgsIF9jcmVhdGVUZXh0Vk5vZGUoX3RvRGlzcGxheVN0cmluZyhpdGVtLnByaWNlKSArICIgIiwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZVZOb2RlKCJzcGFuIiwgX2hvaXN0ZWRfOSwgIsKlIiArIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5vbGRQcmljZSksIDEKICAgIC8qIFRFWFQgKi8KICAgICldKV0pLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzEwLCBbX2NyZWF0ZVZOb2RlKCJzcGFuIiwgewogICAgICBjbGFzczogInByb2R1Y3RfX251bWJlcl9fbWludXMgaWNvbmZvbnQiLAogICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICRzZXR1cC5jaGFuZ2VDYXJ0SXRlbSgkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCwgaXRlbSwgLTEsICRwcm9wcy5zaG9wTmFtZSk7CiAgICAgIH0KICAgIH0sICLumpEiLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbIm9uQ2xpY2siXSksIF9jcmVhdGVUZXh0Vk5vZGUoIiAiICsgX3RvRGlzcGxheVN0cmluZygkc2V0dXAuZ2V0UHJvZHVjdENhcnRDb3VudCgkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCkpICsgIiAiLCAxCiAgICAvKiBURVhUICovCiAgICApLCBfY3JlYXRlVk5vZGUoInNwYW4iLCB7CiAgICAgIGNsYXNzOiAicHJvZHVjdF9fbnVtYmVyX19wbHVzIGljb25mb250IiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAkc2V0dXAuY2hhbmdlQ2FydEl0ZW0oJHNldHVwLnNob3BJZCwgaXRlbS5faWQsIGl0ZW0sIDEsICRwcm9wcy5zaG9wTmFtZSk7CiAgICAgIH0KICAgIH0sICLumagiLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbIm9uQ2xpY2siXSldKV0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpXSldKTsKfSk7"},{"version":3,"sources":["F:\\TuTShop\\前端代码\\dianshang-fe-by-Dell\\src\\views\\shop\\Content.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"category\">\n      <div\n        :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\n        v-for=\"item in categories\"\n        :key=\"item.name\"\n        @click=\"() => handleTabClick(item.tab)\"\n      >\n        {{item.name}}\n      </div>\n    </div>\n    <div class=\"product\">\n      <div\n        class=\"product__item\"\n        v-for=\"item in list\"\n        :key=\"item._id\"\n      >\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__sales\">月售 {{item.sales}} 件</p>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span\n            class=\"product__number__minus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, -1, shopName) }\"\n          >&#xe691;</span>\n            {{getProductCartCount(shopId, item._id)}}\n          <span\n            class=\"product__number__plus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, 1, shopName) }\"\n          >&#xe668;</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, toRefs, watchEffect } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { get } from '../../utils/request'\nimport { useCommonCartEffect } from '../../effects/cartEffects'\n\nconst categories = [\n  { name: '全部商品', tab: 'all' },\n  { name:'秒杀', tab: 'seckill' },\n  { name: '新鲜水果', tab: 'fruit'}\n]\n\n// Tab 切换相关的逻辑\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab)\n  const handleTabClick = (tab) => {\n    currentTab.value = tab\n  }\n  return { currentTab, handleTabClick}\n}\n\n// 列表内容相关的逻辑\nconst useCurrentListEffect = (currentTab, shopId) => {\n  const content = reactive({ list: [] })\n  const getContentData = async () => {\n    const result = await get(`/api/shop/${shopId}/products`, {\n      tab: currentTab.value\n    })\n    if(result?.errno === 0 && result?.data?.length) {\n      content.list = result.data;\n    }\n  }\n  watchEffect(() => { getContentData() })\n  const { list } = toRefs(content)\n  return { list }\n}\n\n// 购物车相关逻辑\nconst useCartEffect = () => {\n  const store = useStore()\n  const { cartList, changeCartItemInfo } = useCommonCartEffect()\n  const changeShopName = (shopId, shopName) => {\n    store.commit('changeShopName', { shopId, shopName })\n  }\n  const changeCartItem = (shopId, productId, item, num, shopName) => {\n    changeCartItemInfo(shopId, productId, item, num)\n    changeShopName(shopId, shopName)\n  }\n  const getProductCartCount = (shopId, productId) => {\n    return cartList?.[shopId]?.productList?.[productId]?.count || 0\n  }\n  return { cartList, changeCartItem, getProductCartCount }\n}\n\nexport default {\n  name: 'Content',\n  props: ['shopName'],\n  setup() {\n    const route = useRoute()\n    const shopId = route.params.id\n    const { currentTab, handleTabClick } = useTabEffect()\n    const { list } = useCurrentListEffect(currentTab, shopId)\n    const { changeCartItem, cartList, getProductCartCount } = useCartEffect()\n    return {\n      categories, currentTab, handleTabClick, list,\n      shopId, changeCartItem, cartList, getProductCartCount\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n.content {\n  display: flex;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 1.5rem;\n  bottom: .5rem;\n}\n.category {\n  overflow-y: scroll;\n  height: 100%;\n  width: .76rem;\n  background: $search-bgColor;\n  &__item {\n    line-height: .4rem;\n    text-align: center;\n    font-size: .14rem;\n    color: #333;\n    &--active {\n      background: $bgColor;\n    }\n  }\n}\n.product {\n  overflow-y: scroll;\n  flex: 1;\n  &__item {\n    position: relative;\n    display: flex;\n    padding: .12rem 0;\n    margin: 0 .16rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: .68rem;\n      height: .68rem;\n      margin-right: .16rem;\n    }\n    &__title {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__sales {\n      margin: .06rem 0;\n      font-size: .12rem;\n      color: $content-fontcolor;\n    }\n    &__price {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $hightlight-fontColor;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      line-height: .2rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .12rem;\n      line-height: .18rem;\n      &__minus {\n        position:relative;\n        top: .02rem;\n        color: $medium-fontColor;\n        margin-right: .05rem;\n      }\n      &__plus {\n        position:relative;\n        top: .02rem;\n        color: $btn-bgColor;\n        margin-left: .05rem;\n      }\n    }\n  }\n  \n}\n</style>\n"],"sourceRoot":""}]}